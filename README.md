# order-book-app
Orderbook Application

1. By default, this application runs on 8081 port as defiend in application.properties (only local environment has been taken into account)
2. The UI for interacting with API calls can be accessed from http://localhost:8081/orderbook.html
3. Online API documentation is accessible on http://localhost:8081/swagger-ui.htm, implemented using Swagger
4. Graceful Shutdown has been implemented in two different ways. One using default Spring actuator components and another one using a customer controller class. 
5. All metrics regarding number of orders processed, processing time (max, min, average and percentiles) have been implemented by using 
Micrometer in conjunction with Prometheus and are accessible on http://localhost:8081/actuator/prometheus. In order to get a more readable format, it should convenient to use this information with Prometheus application.
6. Application logs are generated by default in D:/logs folder. It is a time based rolling file appender and implemented using Logback. Logs are shown in both console and file.
7. Application is using in-memory based persistency so once the application is shutdown everything is lost.

REST API details

Open Orderbook

1. Method: GET
2. URL: orderbook/open/{instrumentId}
3. Sample response body

	a. {"status":"success"}
	
	b. {"status":"error","errorCode":"ORDER_BOOK_ALREADY_OPENED"}

------------------------------------------------------------------------------------------------

Add Order

1. Method: POST
2. Request Content-Type: application/json
3. URL: orderbook/order/add
4. Sample request Body

    a. {"instrumentId":"ABC", "quantity":43, "price":100, "orderType":"LIMIT"}

5. Sample response body

    a. {"status":"success","data":{"orderId":"cc8f9293-3d6e-4ef7-9cea-aaef70bd01f8"}}

------------------------------------------------------------------------------------------------

Close Orderbook

1. Method: GET
2. URL: orderbook/close/{instrumentId}
3. Sample response body

    a. {"status":"success"}
    
    b. {"status":"error","errorCode":"ORDER_BOOK_ALREADY_CLOSED"}

------------------------------------------------------------------------------------------------

Execute Orderbook

1. Method: POST
2. Request Content-Type: application/json
3. URL: orderbook/execute
4. Sample request body

    a. {"instrumentId":"ABC","quantity":88,"price":100}

5. Sample response body

    a. {"status":"success","data":{"orderBookedExecuted":false}}

------------------------------------------------------------------------------------------------

Get Order details

1. Method: GET
2. URL: orderbook/order/get/{orderId from Add Order API response}
3. Sample response body

	a. {"status":"success","data":{"quantity":43,"executionQuantity":0,"price":22.0,"executionPrice":0.0,"status":null,"type":"LIMIT"}}

------------------------------------------------------------------------------------------------

Get ALL/VALID/INVALID order statics statistics

1. Method: GET
2. URL

  orderbook/stats/{instrumentId}/ALL
  
  orderbook/stats/{instrumentId}/VALID
  
  orderbook/stats/{instrumentId}/INVALID

3. Sample response body

	a. {"status":"success","data":{"instrumentId":"ABC","numOrders":2,"demand":86,"maxOrder":{"orderId":"e64f8a0f-31e1-424e-b8bf-ff466a3858de","quantity":43,"entryDate":"2019-05-08T22:48:15.188","price":22.0,"orderType":"LIMIT"},"minOrder":{"orderId":"e64f8a0f-31e1-424e-b8bf-ff466a3858de","quantity":43,"entryDate":"2019-05-08T22:48:15.188","price":22.0,"orderType":"LIMIT"},"firstOrder":{"orderId":"e64f8a0f-31e1-424e-b8bf-ff466a3858de","quantity":43,"entryDate":"2019-05-08T22:48:15.188","price":22.0,"orderType":"LIMIT"},"lastOrder":{"orderId":"cc8f9293-3d6e-4ef7-9cea-aaef70bd01f8","quantity":43,"entryDate":"2019-05-08T22:48:23.736","price":22.0,"orderType":"LIMIT"},"limitBreakDown":[{"price":22.0,"demand":86}]}}

------------------------------------------------------------------------------------------------

Shutdown application

1. Method: POST
2. URL1: orderbook/shutdown
3. URL2: actuator/shutdown
4. No response

------------------------------------------------------------------------------------------------

Metrics

1. Method: GET
2. URL: actuator/prometheus
3. Sample response body

	a. http_server_requests_seconds{exception="None",host="localhost",method="GET",service="orderbook",status="200",uri="/actuator/prometheus",quantile="0.5",} 0.027262976
	b. http_server_requests_seconds_max{exception="None",host="localhost",method="GET",service="orderbook",status="200",uri="/orderbook/open/{instrumentId}",} 0.0459222